"use strict";(self.webpackChunkbuilders_eth=self.webpackChunkbuilders_eth||[]).push([[18],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=o.createContext({}),s=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=s(e.components);return o.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),d=s(n),m=i,h=d["".concat(c,".").concat(m)]||d[m]||u[m]||r;return n?o.createElement(h,l(l({ref:t},p),{},{components:n})):o.createElement(h,l({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=d;var a={};for(var c in t)hasOwnProperty.call(t,c)&&(a[c]=t[c]);a.originalType=e,a.mdxType="string"==typeof e?e:i,l[1]=a;for(var s=2;s<r;s++)l[s]=n[s];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2179:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return g},frontMatter:function(){return a},metadata:function(){return s},toc:function(){return u}});var o=n(7462),i=n(3366),r=(n(7294),n(3905)),l=["components"],a={sidebar_position:9},c="HelloWorld.sol on Your Machine",s={unversionedId:"solidity-101/language-building-blocks/Solidity-File-Overview/HelloWorld-On-Your-Machine",id:"solidity-101/language-building-blocks/Solidity-File-Overview/HelloWorld-On-Your-Machine",title:"HelloWorld.sol on Your Machine",description:"Let's create our HelloWorld.sol to a local development environment on our machine.",source:"@site/docs/solidity-101/2-language-building-blocks/1-Solidity-File-Overview/9-HelloWorld-On-Your-Machine.mdx",sourceDirName:"solidity-101/2-language-building-blocks/1-Solidity-File-Overview",slug:"/solidity-101/language-building-blocks/Solidity-File-Overview/HelloWorld-On-Your-Machine",permalink:"/docs/solidity-101/language-building-blocks/Solidity-File-Overview/HelloWorld-On-Your-Machine",draft:!1,editUrl:"https://github.com/tesla809/BuildersETH/issues/docs/solidity-101/2-language-building-blocks/1-Solidity-File-Overview/9-HelloWorld-On-Your-Machine.mdx",tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Licences",permalink:"/docs/solidity-101/language-building-blocks/Solidity-File-Overview/Licences"},next:{title:"Second Smart Contract: Storage Box",permalink:"/docs/solidity-101/language-building-blocks/Solidity-File-Overview/Second-Smart-Contract"}},p={},u=[{value:"Setting Up Development Enivronment",id:"setting-up-development-enivronment",level:2},{value:"Directory Description",id:"directory-description",level:3},{value:"Contracts",id:"contracts",level:4},{value:"Migrations",id:"migrations",level:4},{value:"Test",id:"test",level:4},{value:"truffle.config.js",id:"truffleconfigjs",level:4},{value:"A note on <code>truffle.config.js</code>",id:"a-note-on-truffleconfigjs",level:3},{value:"Writing the Contract",id:"writing-the-contract",level:2},{value:"Creating the Contract",id:"creating-the-contract",level:3},{value:"Adjusting the Compiler and Compiling",id:"adjusting-the-compiler-and-compiling",level:3},{value:"Build folder and the Application Binary Interface",id:"build-folder-and-the-application-binary-interface",level:2},{value:"Deploying the contract",id:"deploying-the-contract",level:2},{value:"Installing Ganache CLI",id:"installing-ganache-cli",level:3},{value:"Deploying Your Contract",id:"deploying-your-contract",level:3}],d=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)}},m=d("Tabs"),h=d("TabItem"),f={toc:u};function g(e){var t=e.components,n=(0,i.Z)(e,l);return(0,r.kt)("wrapper",(0,o.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"helloworldsol-on-your-machine"},"HelloWorld.sol on Your Machine"),(0,r.kt)("p",null,"Let's create our ",(0,r.kt)("inlineCode",{parentName:"p"},"HelloWorld.sol")," to a local development environment on our machine."),(0,r.kt)("h2",{id:"setting-up-development-enivronment"},"Setting Up Development Enivronment"),(0,r.kt)("p",null,"First, let's create a new directory. Navigate to where you want to place your code and create a new directory, aka folder."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"mkdir web3CryptoDev"),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"1-HelloWorld")),(0,r.kt)("p",null,"Now lets create the project scaffold:\n",(0,r.kt)("inlineCode",{parentName:"p"},"truffle init")),(0,r.kt)("p",null,"Inside our newly created project we find a few files:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},".\n\u251c\u2500\u2500 contracts\n\u2502\xa0\xa0 \u2514\u2500\u2500 Migrations.sol\n\u251c\u2500\u2500 migrations\n\u2502\xa0\xa0 \u2514\u2500\u2500 1_initial_migration.js\n\u251c\u2500\u2500 test\n\u2514\u2500\u2500 truffle-config.js\n")),(0,r.kt)("h3",{id:"directory-description"},"Directory Description"),(0,r.kt)("p",null,"Lets explore what each folder and file does."),(0,r.kt)("h4",{id:"contracts"},"Contracts"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"contracts")," directory is where your smart contracts are stored."),(0,r.kt)("p",null,"The default file is the ",(0,r.kt)("inlineCode",{parentName:"p"},"Migratons.sol"),", which keeps a history of previously run migrations that is recorded on-chain."),(0,r.kt)("h4",{id:"migrations"},"Migrations"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"migrations")," directory files that helps you help you deploy contracts to the Ethereum network. Migration files are simply a set of managed deployment scripts. All the migrations located in this will run in the order listed, from 1 to N."),(0,r.kt)("p",null,"The first script is ",(0,r.kt)("inlineCode",{parentName:"p"},"1_initial_migration.js")," and is for the ",(0,r.kt)("inlineCode",{parentName:"p"},"Migration.sol"),". In Truffle, each contract usually has its own migration script."),(0,r.kt)("p",null,"So, ",(0,r.kt)("inlineCode",{parentName:"p"},"Apple.sol")," would have ",(0,r.kt)("inlineCode",{parentName:"p"},"n-apple.js")," with ",(0,r.kt)("inlineCode",{parentName:"p"},"n")," being the order you'd like to deploy it. If you'd like to deploy it first it would be named ",(0,r.kt)("inlineCode",{parentName:"p"},"2-apple.js"),". Note that ",(0,r.kt)("inlineCode",{parentName:"p"},"1_initial_migration.js")," goes first."),(0,r.kt)("p",null,"We will learn more about migrations later."),(0,r.kt)("h4",{id:"test"},"Test"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"test")," folder holds our tests. Testing is EXTREMELY important in smart contract development, because they are technically immutable and can hold large sums of value. Along with testing ",(0,r.kt)("a",{parentName:"p",href:"https://consensys.net/diligence/scribble/"},(0,r.kt)("strong",{parentName:"a"},"fuzzing"))," is also a best practice. Fuzzing allows you to catch unknown unknowns in your contract, by throwing a million different things at it to see what breaks it."),(0,r.kt)("p",null,"We will cover these topics later."),(0,r.kt)("h4",{id:"truffleconfigjs"},"truffle.config.js"),(0,r.kt)("p",null,"This holds the configuration for our project. Here we can customize the networks, network providers, and other things."),(0,r.kt)("h3",{id:"a-note-on-truffleconfigjs"},"A note on ",(0,r.kt)("inlineCode",{parentName:"h3"},"truffle.config.js")),(0,r.kt)("p",null,"We will be covering ",(0,r.kt)("inlineCode",{parentName:"p"},"truffle.config.js")," more in depth later, as our needs evolve and we require greater customization."),(0,r.kt)("p",null,"If you'd like, you can learn more about ",(0,r.kt)("a",{parentName:"p",href:"https://trufflesuite.com/docs/truffle/reference/configuration/"},"truffle.config.js here"),"."),(0,r.kt)("h2",{id:"writing-the-contract"},"Writing the Contract"),(0,r.kt)("h3",{id:"creating-the-contract"},"Creating the Contract"),(0,r.kt)("p",null,"Now let's write our first smart contract on our local machine."),(0,r.kt)("p",null,"Create a new file inside the contracts folder, with the following command:\n",(0,r.kt)("inlineCode",{parentName:"p"},"truffle create contract HelloWorld")),(0,r.kt)(m,{mdxType:"Tabs"},(0,r.kt)(h,{value:"sol",label:"HelloWorld.sol",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},'// SPDX-License-Identifier: MIT\npragma solidity 0.8.13;\n\ncontract HelloWorld {\n    string public greetings = "Hello World!";\n}\n')))),(0,r.kt)("h3",{id:"adjusting-the-compiler-and-compiling"},"Adjusting the Compiler and Compiling"),(0,r.kt)("p",null,"Let's configure our ",(0,r.kt)("inlineCode",{parentName:"p"},"truffle.config.js")," to use ",(0,r.kt)("inlineCode",{parentName:"p"},"solidity 0.8.13"),". Navigate to where the we find the ",(0,r.kt)("inlineCode",{parentName:"p"},"compilers")," and update it to ",(0,r.kt)("inlineCode",{parentName:"p"},"0.8.13")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'  // Configure your compilers\n  compilers: {\n    solc: {\n      version: "0.8.13",    // changed from 0.8.11 or which ever version appears\n      // docker: true,      // Ignore this below\n      // settings: {\n      //  optimizer: {\n      //    enabled: false,\n      //    runs: 200\n      //  },\n      //  evmVersion: "byzantium"\n      // }\n    }\n  },\n')),(0,r.kt)("p",null,"Next run the command in the terminal:",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"truffle compile")),(0,r.kt)("h2",{id:"build-folder-and-the-application-binary-interface"},"Build folder and the Application Binary Interface"),(0,r.kt)("p",null,"Notice our new directory: ",(0,r.kt)("inlineCode",{parentName:"p"},"build/.")," The ",(0,r.kt)("inlineCode",{parentName:"p"},"build/")," directory holds the glue between our Solidity smart contract and the JavaScript, which will connect to our code."),(0,r.kt)("p",null,'This glue is called the "Application Binary Interface" or ABI. The ABI does this connecting by mapping our JavaScript to EVM bytecode. This way, when we interact with JavaScript, it knows where to interact on the Ethereum Blockchain. We generate our EVM bytecode from compiling Solidity. Another name for these is artifacts.'),(0,r.kt)("p",null,"Do not edit any ABI files in the ",(0,r.kt)("inlineCode",{parentName:"p"},"build/")," directory. First, they will be overwritten upon any contract compilation and deployment. Also, they are essential to how Truffle works, so any edits may cause unintended errors."),(0,r.kt)("p",null,"The name of the generated ABI ",(0,r.kt)("inlineCode",{parentName:"p"},".json")," files does not reflect the source file's name. Instead, they are the names of the contract definition."),(0,r.kt)("p",null,"We have defined two contracts:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"HelloWorld.sol")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Migrations.sol"))),(0,r.kt)("p",null,"However if ",(0,r.kt)("inlineCode",{parentName:"p"},"HelloWorld.sol")," had two contract defintions, we would have three ABIs."),(0,r.kt)("p",null,"Let's test this out by creating another contract in ",(0,r.kt)("inlineCode",{parentName:"p"},"HelloWorld.sol"),"."),(0,r.kt)(m,{mdxType:"Tabs"},(0,r.kt)(h,{value:"sol",label:"HelloWorld.sol",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-solidity"},'// SPDX-License-Identifier: MIT\n// compiler version must be greater than or equal to 0.8.13 and less than 0.9.0\npragma solidity ^0.8.13;\n\ncontract HelloWorld {\n    string public greetings = "Hello World!";\n}\n\n// new contract\ncontract HelloAgain {\n  string public greetings = "Hello Again!";\n}\n')))),(0,r.kt)("p",null,"Let's compile the contract again:\n",(0,r.kt)("inlineCode",{parentName:"p"},"truffle compile")),(0,r.kt)("p",null,"Volia! Notice the ",(0,r.kt)("inlineCode",{parentName:"p"},"build/")," has 3 artifacts (ABIs):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"HelloAgain.json")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"HelloWorld.json")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Migrations.json"))),(0,r.kt)("p",null,"Notice the new ABI in the ",(0,r.kt)("inlineCode",{parentName:"p"},"/contracts")," directory:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\u251c\u2500\u2500 build\n\u2502   \u2514\u2500\u2500 contracts\n\u2502       \u251c\u2500\u2500 HelloAgain.json < new ABI\n\u2502       \u251c\u2500\u2500 HelloWorld.json\n\u2502       \u2514\u2500\u2500 Migrations.json\n\u251c\u2500\u2500 contracts\n\u2502   \u251c\u2500\u2500 HelloWorld.sol\n\u2502   \u2514\u2500\u2500 Migrations.sol\n\u251c\u2500\u2500 migrations\n\u2502   \u2514\u2500\u2500 1_initial_migration.js\n\u251c\u2500\u2500 package-lock.json\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 test\n\u2514\u2500\u2500 truffle-config.js\n")),(0,r.kt)("p",null,"Often, ",(0,r.kt)("inlineCode",{parentName:"p"},".sol")," files may have more than one contract, simliar to how a JavaScript file can have more than one class."),(0,r.kt)("h2",{id:"deploying-the-contract"},"Deploying the contract"),(0,r.kt)("p",null,"Congratulations! You have written your first smart contract! \ud83c\udf89"),(0,r.kt)("p",null,"Now, lets deploy your contract on to a Ethereum network. To begin, let's deploy it to a local test network."),(0,r.kt)("p",null,"A local test network is an instance of the Ethereum network that runs on your machine. This allows you quickly test your smart contracts without internet connection for fast iterations."),(0,r.kt)("p",null,"To connect to a test network let's add the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/trufflesuite/ganache"},"Ganache")," local test network to the project."),(0,r.kt)("p",null,"Ganache comes in two flavors, a command line interface (CLI) and a graphic user interace (GUI). We will begin to with using the CLI. Don't fret, once you use it for a few days, you will quickly understand it. We only need a few commands to get most of what we need when interacting with it."),(0,r.kt)("h3",{id:"installing-ganache-cli"},"Installing Ganache CLI"),(0,r.kt)("p",null,"To install Ganache CLI locally, navigate to your repo and run:",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"npm install ganache")),(0,r.kt)("p",null,"Start up Ganache create a new tab in your terminal:",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"ganache")),(0,r.kt)("p",null,"This will spin up a local blockchain for you. We will get into the details of what the output means a few lessons from now. For now, lets deploy our contract."),(0,r.kt)("h3",{id:"deploying-your-contract"},"Deploying Your Contract"),(0,r.kt)("p",null,"Make sure your ",(0,r.kt)("inlineCode",{parentName:"p"},"network_id")," is configured correclty for your local development port in ",(0,r.kt)("inlineCode",{parentName:"p"},"truffle.config.js")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'  // Configure your network\n  networks: {\n// ...\n    development: {\n      host: "127.0.0.1", // Localhost (default: none)\n      port: 8545, // Standard Ethereum port (default: none)\n      network_id: "*", // Any network (default: none)\n    },\n// ...\n  },\n')),(0,r.kt)("p",null,"Make sure to have ganache running in another tab. If not the local blockchain will not be running."),(0,r.kt)("p",null,"To start up ganache in a new terminal tab run:",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"ganache")),(0,r.kt)("p",null,"To deploy, in a seperate tab run:",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"truffle migrate")),(0,r.kt)("p",null,"Volia! You have deployed to your local chain!"))}g.isMDXComponent=!0}}]);